jQuery(document).ready((function(n){const a="/wp-admin/admin-ajax.php";function o(a){return 0==parseInt(a)?(n("body").find("#favorites").detach(),!0):(n("body").find("#favorites").length>0?(n("body").find("#favorites").html("Избранное ("+a+")"),n("body").find("#mob-fav-btn .mob-fav-btn-count").html(a)):(n("body").append('<div id="favorites" class="favorites-container">Избранное ('+a+")</div>"),n("body").find("#mob-fav-btn .mob-fav-btn-count").html(a)),!0)}n("body").on("click",".change_like",(function(t){t.preventDefault();var e=t.target,i=n(e).data("post");n(e).parents(".item-product_popular");n.ajax({url:a,type:"POST",dataType:"json",data:{action:"change_like",post_id:i}}).done((function(a){n(e).toggleClass("is_liked"),o(a.count)})).fail((function(n){console.log(n)}))})),n.ajax({url:a,type:"POST",dataType:"json",data:{action:"load_liked"}}).done((function(a){var t=a.data;t.forEach((function(n,a){t[a]=parseInt(n)})),n.each(n("body").find(".item-product_popular"),(function(a,o){var e=n(o).find(".change_like"),i=parseInt(n(e).data("post"));-1==t.indexOf(i)?n(e).removeClass("is_liked"):n(e).addClass("is_liked")})),o(t.length)})).fail((function(n){console.log(n)})),n("body").on("click","#favorites,#favorites-mobile",(function(n){n.preventDefault(),location.href="/izbrannoe/"}))}));